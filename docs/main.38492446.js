(()=>{"use strict";var t,e={269:(t,e,n)=>{var r=n(294),o=n(935),i=n(63),a=n.n(i);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const l=class{constructor(){var t=this;c(this,"state",void 0),c(this,"listeners",void 0),c(this,"emits",void 0),c(this,"timer",void 0),c(this,"createStore",(t=>{this.state=t})),c(this,"getStore",(()=>{var t=Reflect.ownKeys(this.state),e={};return t.forEach((t=>{e[t]=JSON.parse(JSON.stringify(this.state[t]))})),e})),c(this,"subscribe",(t=>(this.listeners.push(t),()=>{var e=this.listeners.slice(),n=e.indexOf(t);n>-1&&e.splice(n,1),this.listeners=e}))),c(this,"dispatch",(function(e){for(var n=typeof e,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];if("function"===n)return e({dispatch:e=>t.dispatch(e,!0),getStore:t.getStore},...o);t.emits=A(A({},t.emits),e),o[0]?t.emit():(clearTimeout(t.timer),t.timer=setTimeout(t.emit))})),c(this,"emit",(()=>{for(var t=this.emits,e=[],n=Reflect.ownKeys(t),r=0;r<n.length;r+=1){var o=n[r];o in this.state&&(a()(this.state[o],t[o])||(this.state[o]=t[o],e.push(o)))}e.length&&this.listeners.forEach((t=>t(e))),this.emits={},this.timer=void 0})),this.state={},this.listeners=[],this.emits={},this.timer=void 0}};function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=["name","prototype","length","propTypes","defaultProps","getDerivedStateFromProps","contextTypes","displayName"];function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=new class extends l{constructor(){super(...arguments),m(this,"connect",function(t){var{getStore:e,subscribe:n,dispatch:o}=t;return function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return function(t){class a extends r.Component{constructor(){super(...arguments),p(this,"unsubscribe",void 0),p(this,"state",{props:e()})}componentDidMount(){this.unsubscribe=n((t=>{i.filter((e=>t.includes(e))).length&&this.setState({props:e()})}))}componentWillUnmount(){this.unsubscribe()}render(){var{props:e}=this.state,n=Object.assign({dispatch:o},e,this.props);return r.createElement(t,n)}}return Object.getOwnPropertyNames(t).forEach((e=>{var n=e;u.includes(e)||(a[n]=t[n])})),a}}}(this)),m(this,"useStore",function(t){var{getStore:e,subscribe:n}=t;return function(){for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];var[a,s]=(0,r.useState)(e());return(0,r.useLayoutEffect)((()=>n((t=>{o.filter((e=>t.includes(e))).length&&s(e())})))),a}}(this))}},{createStore:f,getStore:g,dispatch:h,subscribe:b,connect:E,useStore:v}=d,x=n(379),C=n.n(x),y=n(933);C()(y.Z,{insert:"head",singleton:!1});const w=y.Z.locals||{};function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S(t,e,n,r,o,i,a){try{var s=t[i](a),A=s.value}catch(t){return void n(t)}s.done?e(A):Promise.resolve(A).then(r,o)}function B(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){S(i,r,o,a,s,"next",t)}function s(t){S(i,r,o,a,s,"throw",t)}a(void 0)}))}}var k=Symbol("key");function P(){var{name:t,age:e}=v("name","age");return r.createElement("div",{className:w.com},r.createElement("h2",null,"Hooks"),r.createElement("p",null,r.createElement("span",null,"name:"),t),r.createElement("p",null,r.createElement("span",null,"age:"),e),r.createElement("button",{type:"button",onClick:()=>{h({age:e+1,[k]:"b"})}},"Dispatch"))}f({age:0,name:"abc",[k]:"a"}),b((t=>{console.log("subscribe",t);var e=g();console.log(e[k]),"b"===e[k]&&(e[k]="aaaa")}));var j=function(){var t=B((function*(t,e){var{dispatch:n,getStore:r}=t;return yield new Promise((t=>setTimeout(t,2e3))),n({name:e}),r().name}));return function(e,n){return t.apply(this,arguments)}}(),_=function(){var t=B((function*(t){var{dispatch:e,getStore:n}=t,{age:r}=n();e({age:r+1})}));return function(e){return t.apply(this,arguments)}}();class D extends r.Component{constructor(){var t;super(...arguments),t=this,O(this,"state",{loading:!1}),O(this,"setName",B((function*(){var{loading:e}=t.state;if(!e){t.setState({loading:!0});var{dispatch:n}=t.props;n({age:1}),yield n(j,Math.random().toString(36).substring(7)),t.setState({loading:!1}),console.log(g())}})))}render(){var{age:t,name:e,desc:n}=this.props,{loading:o}=this.state,i=o?w.loading:"";return r.createElement("div",{className:w.com},r.createElement("h2",null,n),r.createElement("p",null,r.createElement("span",null,"name:"),e),r.createElement("p",null,r.createElement("span",null,"age:"),t),r.createElement("button",{className:i,type:"button",onClick:this.setName},"Async Dispatch"))}}var W=E("age","name")(D),N=E("age","name")((function(t){var{age:e,name:n,dispatch:o,desc:i}=t;return r.createElement("div",{className:w.com},r.createElement("h2",null,i),r.createElement("p",null,r.createElement("span",null,"name:"),n),r.createElement("p",null,r.createElement("span",null,"age:"),e),r.createElement("button",{type:"button",onClick:()=>{o(_)}},"Dispatch"))}));function F(){return r.createElement(r.Fragment,null,r.createElement(P,null),r.createElement(W,{desc:"Class Component"}),r.createElement(N,{desc:"Function Component"}))}var T=new l,{createStore:z,getStore:U,dispatch:G,subscribe:I}=T;function M(t,e,n,r,o,i,a){try{var s=t[i](a),A=s.value}catch(t){return void n(t)}s.done?e(A):Promise.resolve(A).then(r,o)}function X(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){M(i,r,o,a,s,"next",t)}function s(t){M(i,r,o,a,s,"throw",t)}a(void 0)}))}}const L=()=>((0,r.useEffect)((()=>{z({config:{type:"page",on:!1},time:11});var t=I((t=>{console.log("subscribe",t)}));console.log("store0",U()),G({time:1}),G({config:{on:!0,type:"component"}}),console.log("store1",U()),setTimeout((()=>console.log("store2",U()))),G({time:2},!0),console.log("store3",U()),G(function(){var t=X((function*(t){for(var{getStore:e,dispatch:n}=t,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];console.log("args0",o);var{time:a}=e();n({time:a+1})}));return function(e){return t.apply(this,arguments)}}(),1,2);var e=function(){var t=X((function*(t){for(var{getStore:e,dispatch:n}=t,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];console.log("args1",o),yield new Promise((t=>setTimeout(t,1e3)));var{config:a}=e();"boolean"==typeof o[0]&&([a.on]=o),n({config:a})}));return function(e){return t.apply(this,arguments)}}(),n=function(){var t=X((function*(t){var{getStore:e}=t,{config:n}=e();return console.log(n),1}));return function(e){return t.apply(this,arguments)}}();G(e,!1),G(n).then((()=>{console.log("2"),G({time:1e3})})),t()}),[]),null);(0,o.render)(r.createElement("div",{className:w.container},r.createElement("div",{className:w.co},r.createElement(F,null)),r.createElement("div",{className:w.ru},r.createElement(L,null))),document.querySelector("#root"))},933:(t,e,n)=>{n.d(e,{Z:()=>s});var r=n(15),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([t.id,"@keyframes spin_2jXe4 {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n.container_2cx6z {\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n}\n.right_1T0vt {\n  border-left: 1px solid #eee;\n  padding: 20px;\n  white-space: pre;\n}\n.right_1T0vt h2 {\n  margin: 0 0 0 5px;\n  font-size: 16px;\n  color: #10f108;\n  padding: 3px 7px;\n  font-weight: normal;\n  background: #242425;\n  border-radius: 2px;\n  display: inline-block;\n}\n.co_1hMsD {\n  display: flex;\n  padding: 20px;\n}\n.com_3UsWm {\n  border: 1px solid #eee;\n  padding: 20px;\n  flex: 1;\n  border-radius: 2px;\n}\n.com_3UsWm:nth-child(2) {\n  margin: 0 20px;\n}\n.com_3UsWm h2 {\n  font-size: 24px;\n  margin: 0;\n  font-weight: 400;\n  color: #333;\n  margin-bottom: 30px;\n}\n.com_3UsWm button {\n  margin-top: 20px;\n  font-size: 14px;\n  color: #fff;\n  background: #0170fe;\n  padding: 4px 10px;\n  border-radius: 3px;\n  border: 1px solid #0170fe;\n  cursor: pointer;\n  position: relative;\n}\n.com_3UsWm button.loading_2tX-6 {\n  padding-left: 24px;\n}\n.com_3UsWm button.loading_2tX-6::before {\n  content: '';\n  position: absolute;\n  left: 4px;\n  top: 4px;\n  border: 2px solid #f3f3f3;\n  border-top: 2px solid #3498db;\n  border-radius: 50%;\n  width: 12px;\n  height: 12px;\n  animation: spin_2jXe4 2s linear infinite;\n}\n.com_3UsWm p {\n  font-size: 16px;\n  color: #555;\n  margin: 10px 0;\n}\n.com_3UsWm p span {\n  color: #888;\n  margin-right: 5px;\n}\nbody {\n  margin: 0;\n  font-family: Georgia, 'Times New Roman', Times, serif;\n}\n","",{version:3,sources:["webpack://./demo/index.less"],names:[],mappings:"AAAA;EACE;IAAK,uBAAA;EAEL;EADA;IAAO,yBAAA;EAIP;AACF;AAFA;EACC,aAAA;EACA,sBAAA;EACA,aAAA;AAID;AADA;EACC,2BAAA;EACA,aAAA;EACA,gBAAA;AAGD;AANA;EAME,iBAAA;EACA,eAAA;EACA,cAAA;EACA,gBAAA;EACA,mBAAA;EACA,mBAAA;EACA,kBAAA;EACA,qBAAA;AAGF;AACA;EACC,aAAA;EACA,aAAA;AACD;AAEA;EACC,sBAAA;EACA,aAAA;EACA,OAAA;EACA,kBAAA;AAAD;AAEC;EACC,cAAA;AAAF;AAPA;EAWE,eAAA;EACA,SAAA;EACA,gBAAA;EACA,WAAA;EACA,mBAAA;AADF;AAdA;EAmBE,gBAAA;EACA,eAAA;EACA,WAAA;EACE,mBAAA;EACF,iBAAA;EACA,kBAAA;EACA,yBAAA;EACA,eAAA;EACA,kBAAA;AAFF;AAIE;EACC,kBAAA;AAFH;AAIG;EACC,WAAA;EACA,kBAAA;EACA,SAAA;EACA,QAAA;EACA,yBAAA;EACC,6BAAA;EACA,kBAAA;EACA,WAAA;EACA,YAAA;EACA,wCAAA;AAFL;AAxCA;EAgDE,eAAA;EACA,WAAA;EACA,cAAA;AALF;AA7CA;EAqDG,WAAA;EACA,iBAAA;AALH;AASA;EACC,SAAA;EACA,qDAAA;AAPD",sourcesContent:["@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.container {\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: 100vh;\n}\n\n.right {\n\tborder-left: 1px solid #eee;\n\tpadding: 20px;\n\twhite-space: pre;\n\n\th2 {\n\t\tmargin: 0 0 0 5px;\n\t\tfont-size: 16px;\n\t\tcolor: #10f108;\n\t\tpadding: 3px 7px;\n\t\tfont-weight: normal;\n\t\tbackground: #242425;\n\t\tborder-radius: 2px;\n\t\tdisplay: inline-block;\n\t}\n}\n\n.co {\n\tdisplay: flex;\n\tpadding: 20px;\n}\n\n.com {\n\tborder: 1px solid #eee;\n\tpadding: 20px;\n\tflex: 1;\n\tborder-radius: 2px;\n\n\t&:nth-child(2) {\n\t\tmargin: 0 20px;\n\t}\n\n\th2 {\n\t\tfont-size: 24px;\n\t\tmargin: 0;\n\t\tfont-weight: 400;\n\t\tcolor: #333;\n\t\tmargin-bottom: 30px;\n\t}\n\n\tbutton {\n\t\tmargin-top: 20px;\n\t\tfont-size: 14px;\n\t\tcolor: #fff;\n    background: #0170fe;\n\t\tpadding: 4px 10px;\n\t\tborder-radius: 3px;\n\t\tborder: 1px solid #0170fe;\n\t\tcursor: pointer;\n\t\tposition: relative;\n\n\t\t&.loading {\n\t\t\tpadding-left: 24px;\n\n\t\t\t&::before {\n\t\t\t\tcontent: '';\n\t\t\t\tposition: absolute;\n\t\t\t\tleft: 4px;\n\t\t\t\ttop: 4px;\n\t\t\t\tborder: 2px solid #f3f3f3;\n  \t\t\tborder-top: 2px solid #3498db;\n  \t\t\tborder-radius: 50%;\n  \t\t\twidth: 12px;\n  \t\t\theight: 12px;\n  \t\t\tanimation: spin 2s linear infinite;\n\t\t\t}\n\t\t}\n\t}\n\n\tp {\n\t\tfont-size: 16px;\n\t\tcolor: #555;\n\t\tmargin: 10px 0;\n\n\t\tspan {\n\t\t\tcolor: #888;\n\t\t\tmargin-right: 5px;\n\t\t}\n\t}\n}\nbody {\n\tmargin: 0;\n\tfont-family: Georgia, 'Times New Roman', Times, serif;\n}\n"],sourceRoot:""}]),a.locals={container:"container_2cx6z",right:"right_1T0vt",co:"co_1hMsD",com:"com_3UsWm",loading:"loading_2tX-6",spin:"spin_2jXe4"};const s=a}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var i=n[t]={id:t,exports:{}};return e[t](i,i.exports,r),i.exports}r.m=e,t=[],r.O=(e,n,o,i)=>{if(!n){var a=1/0;for(c=0;c<t.length;c++){for(var[n,o,i]=t[c],s=!0,A=0;A<n.length;A++)(!1&i||a>=i)&&Object.keys(r.O).every((t=>r.O[t](n[A])))?n.splice(A--,1):(s=!1,i<a&&(a=i));s&&(t.splice(c--,1),e=o())}return e}i=i||0;for(var c=t.length;c>0&&t[c-1][2]>i;c--)t[c]=t[c-1];t[c]=[n,o,i]},r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={179:0};r.O.j=e=>0===t[e];var e=(e,n)=>{var o,i,[a,s,A]=n,c=0;for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(A)var l=A(r);for(e&&e(n);c<a.length;c++)i=a[c],r.o(t,i)&&t[i]&&t[i][0](),t[a[c]]=0;return r.O(l)},n=self.webpackChunknycticorax=self.webpackChunknycticorax||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var o=r.O(void 0,[736],(()=>r(269)));o=r.O(o)})();
//# sourceMappingURL=main.38492446.js.map