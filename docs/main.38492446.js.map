{"version":3,"sources":["webpack://nycticorax/webpack/runtime/chunk loaded","webpack://nycticorax/./src/core.ts","webpack://nycticorax/./src/connect.tsx","webpack://nycticorax/./demo/store/react.ts","webpack://nycticorax/./src/index.ts","webpack://nycticorax/./src/hooks.ts","webpack://nycticorax/./demo/index.less?fdaf","webpack://nycticorax/./demo/react.tsx","webpack://nycticorax/./demo/store/index.ts","webpack://nycticorax/./demo/run.tsx","webpack://nycticorax/./demo/index.tsx","webpack://nycticorax/./demo/index.less","webpack://nycticorax/webpack/bootstrap","webpack://nycticorax/webpack/runtime/compat get default export","webpack://nycticorax/webpack/runtime/define property getters","webpack://nycticorax/webpack/runtime/hasOwnProperty shorthand","webpack://nycticorax/webpack/runtime/jsonp chunk loading","webpack://nycticorax/webpack/startup"],"names":["deferred","constructor","state","this","keys","Reflect","ownKeys","next","forEach","key","JSON","parse","stringify","listener","listeners","push","slice","index","indexOf","splice","type","args","dispatch","o","getStore","emits","emit","clearTimeout","timer","setTimeout","actives","i","length","eq","undefined","ignoreStaticMethods","nycticorax","Nycticorax","subscribe","C","R","Component","props","componentDidMount","unsubscribe","triggerKeys","filter","k","includes","setState","componentWillUnmount","render","rest","Object","assign","getOwnPropertyNames","method","getConnect","setProps","useState","useLayoutEffect","getHook","createStore","connect","useStore","Symbol","Hook","name","age","className","classes","onClick","console","log","s","setName","text","dp","gs","Promise","r","setAge","C0","loading","Math","random","toString","substring","desc","cs","F","useEffect","config","on","time","dispatcher1","dispatcher2","then","document","querySelector","___CSS_LOADER_EXPORT___","module","id","locals","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","__webpack_modules__","m","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","n","getter","__esModule","d","a","definition","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","installedChunks","179","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","data","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"mappings":"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","file":"main.38492446.js","sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tresult = fn();\n\t\t}\n\t}\n\treturn result;\n};","import eq from 'fast-deep-equal'\n\ntype Listener<T> = (keys: Partial<keyof T>[]) => void\n\nexport type Dispatch<T> = (\n  nycticorax: {\n    getStore: () => T,\n    dispatch: (next: Partial<T>) => void,\n  },\n  ...args: any[]\n) => Promise<unknown>\n\nexport type NycticoraxType<T extends object> = Nycticorax<T>\n\nclass Nycticorax<T extends object> {\n  private state: T\n\n  private listeners: Listener<T>[]\n\n  private emits: T\n\n  private timer: ReturnType<typeof setTimeout> | number | undefined\n\n  constructor() {\n    this.state = {} as T\n    this.listeners = []\n    this.emits = {} as T\n    this.timer = undefined\n  }\n\n  public createStore= (state: T): void => {\n    this.state = state\n  }\n\n  public getStore = (): T => {\n    const keys = Reflect.ownKeys(this.state) as Partial<keyof T>[]\n    const next = {} as T\n\n    keys.forEach((key) => {\n      next[key] = JSON.parse(JSON.stringify(this.state[key]))\n    })\n\n    return next\n  }\n\n  public subscribe = (listener: Listener<T>) => {\n    this.listeners.push(listener)\n\n    return () => {\n      const listeners = this.listeners.slice()\n      const index = listeners.indexOf(listener)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n      this.listeners = listeners\n    }\n  }\n\n  public dispatch = (\n    next: Partial<T> | Dispatch<T>,\n    ...args: any[]\n  ) => {\n    const type = typeof next\n\n    if (type === 'function') {\n      return (next as Function)({\n        dispatch: (o: Partial<T>) => this.dispatch(o, true),\n        getStore: this.getStore,\n      }, ...args)\n    }\n\n    this.emits = { ...this.emits, ...(next as Partial<T>) }\n\n    if (args[0]) {\n      this.emit()\n    } else {\n      clearTimeout(this.timer as number)\n      this.timer = setTimeout(this.emit)\n    }\n\n    return undefined\n  }\n\n  private emit = () => {\n    const next = this.emits\n    const actives: Partial<keyof T>[] = []\n    const keys = Reflect.ownKeys(next) as Partial<keyof T>[]\n\n    for (let i = 0; i < keys.length; i += 1) {\n      const key = keys[i]\n      if (!(key in this.state)) {\n        continue\n      }\n\n      if (eq(this.state[key], next[key])) {\n        continue\n      }\n\n      this.state[key] = next[key]\n      actives.push(key)\n    }\n\n    if (actives.length) {\n      this.listeners.forEach((listener) => listener(actives))\n    }\n\n    this.emits = {} as T\n    this.timer = undefined\n  }\n}\n\nexport default Nycticorax\n","import React, { Component, ComponentType } from 'react'\nimport { NycticoraxType, Dispatch } from './core'\nimport { Subtract } from './types'\n\nconst ignoreStaticMethods = [\n  'name',\n  'prototype',\n  'length',\n  'propTypes',\n  'defaultProps',\n  'getDerivedStateFromProps',\n  'contextTypes',\n  'displayName',\n]\n\nexport type Connect<T> = {\n  dispatch: (next: Partial<T> | Dispatch<T>, ...args: any[]) => unknown,\n} & T\n\nfunction connect<T extends object>(nycticorax: NycticoraxType<T>) {\n  const {\n    getStore,\n    subscribe,\n    dispatch,\n  } = nycticorax\n\n  type ConnectProps = Connect<T>\n\n  return function (...keys: [Partial<keyof T>, ...Partial<keyof T>[]]) {\n    return function<P extends ConnectProps> (C: ComponentType<P> & {\n      [key: string]: any,\n    }): ComponentType<Subtract<P, ConnectProps>> & {\n      [key: string]: any,\n    } {\n      class R extends Component<Subtract<P, ConnectProps>> {\n        private unsubscribe: () => void\n\n        state = {\n          props: getStore(),\n        }\n\n        componentDidMount() {\n          this.unsubscribe = subscribe((triggerKeys) => {\n            const sames = keys.filter((k) => triggerKeys.includes(k))\n            if (sames.length) {\n              this.setState({ props: getStore() })\n            }\n          })\n        }\n\n        componentWillUnmount() {\n          this.unsubscribe()\n        }\n\n        render() {\n          const { props } = this.state\n          // eslint-disable-next-line prefer-object-spread\n          const rest = Object.assign({ dispatch }, props, this.props as P)\n\n          return (\n            <C {...rest} />\n          )\n        }\n      }\n\n      Object\n        .getOwnPropertyNames(C)\n        .forEach((method) => {\n          const key = method as keyof typeof R\n          if (!ignoreStaticMethods.includes(method)) {\n            R[key] = C[key]\n          }\n        })\n\n      return R\n    }\n  }\n}\n\nexport default connect\n","import Nycticorax, { Dispatch as DP, Connect as CT } from '../../src'\n\ntype Store = { name: string, age: number, [key: symbol]: string }\n\nconst nycticorax = new Nycticorax<Store>()\n\nexport const {\n  createStore,\n  getStore,\n  dispatch,\n  subscribe,\n  connect,\n  useStore,\n} = nycticorax\n\nexport type Dispatch = DP<Store>\nexport type Connect = CT<Store>\n","import Nycticorax, { Dispatch } from './core'\nimport getConnect, { Connect } from './connect'\nimport getHook from './hooks'\n\nclass N<T extends object> extends Nycticorax<T> {\n  connect = getConnect(this)\n\n  useStore = getHook(this)\n}\n\nexport default N\nexport type { Dispatch }\nexport type { Connect }\n","import { useState, useLayoutEffect } from 'react'\nimport { NycticoraxType } from './core'\n\nfunction hooks<T extends object>(nycticorax: NycticoraxType<T>) {\n  const { getStore, subscribe } = nycticorax\n\n  return function (...keys: [Partial<keyof T>, ...Partial<keyof T>[]]) {\n    const [props, setProps] = useState(getStore())\n\n    useLayoutEffect(() => {\n      const unsubscribe = subscribe((triggerKeys) => {\n        const sames = keys.filter((k) => triggerKeys.includes(k))\n        if (sames.length) {\n          setProps(getStore())\n        }\n      })\n\n      return unsubscribe\n    })\n\n    return props\n  }\n}\n\nexport default hooks\n","import api from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].use[1]!../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[0].use[2]!./index.less\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/* eslint-disable no-console */\nimport React, { Component } from 'react'\nimport {\n  createStore,\n  getStore,\n  dispatch,\n  subscribe,\n  Dispatch,\n  Connect,\n  connect,\n  useStore,\n} from './store/react'\nimport classes from './index.less'\n\nconst key = Symbol('key')\n\ncreateStore({ age: 0, name: 'abc', [key]: 'a' })\n\nsubscribe((keys) => {\n  console.log('subscribe', keys)\n  const s = getStore()\n\n  console.log(s[key])\n\n  if (s[key] === 'b') {\n    s[key] = 'aaaa'\n  }\n})\n\nfunction Hook() {\n  const { name, age } = useStore('name', 'age')\n\n  return (\n    <div className={classes.com}>\n      <h2>Hooks</h2>\n      <p>\n        <span>name:</span>\n        {name}\n      </p>\n      <p>\n        <span>age:</span>\n        {age}\n      </p>\n      <button\n        type=\"button\"\n        onClick={() => {\n          dispatch({ age: age + 1, [key]: 'b' })\n        }}\n      >\n        Dispatch\n      </button>\n    </div>\n  )\n}\n\nconst setName: Dispatch = async ({ dispatch: dp, getStore: gs }, text) => {\n  await new Promise((r) => setTimeout(r, 2000))\n  dp({ name: text as string })\n  return gs().name\n}\n\nconst setAge: Dispatch = async ({ dispatch: dp, getStore: gs }) => {\n  const { age } = gs()\n  dp({ age: age + 1 })\n}\n\ntype TC = Connect & { desc: string }\n\nclass C0 extends Component<TC> {\n  state = {\n    loading: false,\n  }\n\n  setName = async () => {\n    const { loading } = this.state\n    if (loading) {\n      return\n    }\n\n    this.setState({ loading: true })\n    const { dispatch: dp } = this.props\n    dp({ age: 1 })\n    await dp(setName, Math.random().toString(36).substring(7))\n    this.setState({ loading: false })\n    console.log(getStore())\n  }\n\n  render() {\n    const { age, name, desc } = this.props\n    const { loading } = this.state\n\n    const cs = loading ? classes.loading : ''\n\n    return (\n      <div className={classes.com}>\n        <h2>{desc}</h2>\n        <p>\n          <span>name:</span>\n          {name}\n        </p>\n        <p>\n          <span>age:</span>\n          {age}\n        </p>\n        <button\n          className={cs}\n          type=\"button\"\n          onClick={this.setName}\n        >\n          Async Dispatch\n        </button>\n      </div>\n    )\n  }\n}\n\nfunction F0(props: TC) {\n  const {\n    age, name, dispatch: dp, desc,\n  } = props\n  return (\n    <div className={classes.com}>\n      <h2>{desc}</h2>\n      <p>\n        <span>name:</span>\n        {name}\n      </p>\n      <p>\n        <span>age:</span>\n        {age}\n      </p>\n      <button\n        type=\"button\"\n        onClick={() => {\n          dp(setAge)\n        }}\n      >\n        Dispatch\n      </button>\n    </div>\n  )\n}\n\nconst C = connect('age', 'name')(C0)\nconst F = connect('age', 'name')(F0)\n\nexport default function () {\n  return (\n    <>\n      <Hook />\n      <C desc=\"Class Component\" />\n      <F desc=\"Function Component\" />\n    </>\n  )\n}\n","import Nycticorax, { Dispatch as DP } from '../../src/core'\n\ntype Store = {\n  config: {\n    type: string,\n    on: boolean,\n  },\n  time: number,\n}\n\nconst nycticorax = new Nycticorax<Store>()\n\nexport const {\n  createStore,\n  getStore,\n  dispatch,\n  subscribe,\n} = nycticorax\n\nexport type Dispatch = DP<Store>\n","/* eslint-disable no-console */\nimport { useEffect } from 'react'\nimport {\n  createStore,\n  getStore,\n  dispatch,\n  subscribe,\n  Dispatch,\n} from './store/index'\n\nexport default () => {\n  useEffect(() => {\n    createStore({\n      config: {\n        type: 'page',\n        on: false,\n      },\n      time: 11,\n    })\n\n    const unsubscribe = subscribe((keys) => {\n      console.log('subscribe', keys)\n    })\n\n    console.log('store0', getStore())\n\n    dispatch({ time: 1 })\n    dispatch({ config: { on: true, type: 'component' } })\n\n    console.log('store1', getStore())\n    setTimeout(() => console.log('store2', getStore()))\n\n    dispatch({ time: 2 }, true)\n\n    console.log('store3', getStore())\n\n    const dispatcher0: Dispatch = async ({ getStore: gs, dispatch: dp }, ...args) => {\n      console.log('args0', args)\n      const { time } = gs()\n      dp({ time: time + 1 })\n    }\n\n    dispatch(dispatcher0, 1, 2)\n\n    const dispatcher1: Dispatch = async ({ getStore: gs, dispatch: dp }, ...args) => {\n      console.log('args1', args)\n      await new Promise((r) => setTimeout(r, 1000))\n      const { config } = gs()\n      if (typeof args[0] === 'boolean') {\n        [config.on] = args\n      }\n      dp({ config })\n    }\n\n    const dispatcher2: Dispatch = async ({ getStore: gs }) => {\n      const { config } = gs()\n      console.log(config)\n      return 1\n    }\n\n    dispatch(dispatcher1, false)\n\n    dispatch(dispatcher2).then(() => {\n      console.log('2')\n      dispatch({ time: 1000 })\n    })\n\n    unsubscribe()\n  }, [])\n\n  return null\n}\n","/* eslint-disable import/no-extraneous-dependencies */\nimport React from 'react'\nimport { render } from 'react-dom'\nimport Com from './react'\nimport Run from './run'\nimport classes from './index.less'\n\nrender((\n  <div className={classes.container}>\n    <div className={classes.co}>\n      <Com />\n    </div>\n    <div className={classes.ru}>\n      <Run />\n    </div>\n  </div>\n), document.querySelector('#root'))\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"@keyframes spin_2jXe4 {\\n  0% {\\n    transform: rotate(0deg);\\n  }\\n  100% {\\n    transform: rotate(360deg);\\n  }\\n}\\n.container_2cx6z {\\n  display: flex;\\n  flex-direction: column;\\n  height: 100vh;\\n}\\n.right_1T0vt {\\n  border-left: 1px solid #eee;\\n  padding: 20px;\\n  white-space: pre;\\n}\\n.right_1T0vt h2 {\\n  margin: 0 0 0 5px;\\n  font-size: 16px;\\n  color: #10f108;\\n  padding: 3px 7px;\\n  font-weight: normal;\\n  background: #242425;\\n  border-radius: 2px;\\n  display: inline-block;\\n}\\n.co_1hMsD {\\n  display: flex;\\n  padding: 20px;\\n}\\n.com_3UsWm {\\n  border: 1px solid #eee;\\n  padding: 20px;\\n  flex: 1;\\n  border-radius: 2px;\\n}\\n.com_3UsWm:nth-child(2) {\\n  margin: 0 20px;\\n}\\n.com_3UsWm h2 {\\n  font-size: 24px;\\n  margin: 0;\\n  font-weight: 400;\\n  color: #333;\\n  margin-bottom: 30px;\\n}\\n.com_3UsWm button {\\n  margin-top: 20px;\\n  font-size: 14px;\\n  color: #fff;\\n  background: #0170fe;\\n  padding: 4px 10px;\\n  border-radius: 3px;\\n  border: 1px solid #0170fe;\\n  cursor: pointer;\\n  position: relative;\\n}\\n.com_3UsWm button.loading_2tX-6 {\\n  padding-left: 24px;\\n}\\n.com_3UsWm button.loading_2tX-6::before {\\n  content: '';\\n  position: absolute;\\n  left: 4px;\\n  top: 4px;\\n  border: 2px solid #f3f3f3;\\n  border-top: 2px solid #3498db;\\n  border-radius: 50%;\\n  width: 12px;\\n  height: 12px;\\n  animation: spin_2jXe4 2s linear infinite;\\n}\\n.com_3UsWm p {\\n  font-size: 16px;\\n  color: #555;\\n  margin: 10px 0;\\n}\\n.com_3UsWm p span {\\n  color: #888;\\n  margin-right: 5px;\\n}\\nbody {\\n  margin: 0;\\n  font-family: Georgia, 'Times New Roman', Times, serif;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./demo/index.less\"],\"names\":[],\"mappings\":\"AAAA;EACE;IAAK,uBAAA;EAEL;EADA;IAAO,yBAAA;EAIP;AACF;AAFA;EACC,aAAA;EACA,sBAAA;EACA,aAAA;AAID;AADA;EACC,2BAAA;EACA,aAAA;EACA,gBAAA;AAGD;AANA;EAME,iBAAA;EACA,eAAA;EACA,cAAA;EACA,gBAAA;EACA,mBAAA;EACA,mBAAA;EACA,kBAAA;EACA,qBAAA;AAGF;AACA;EACC,aAAA;EACA,aAAA;AACD;AAEA;EACC,sBAAA;EACA,aAAA;EACA,OAAA;EACA,kBAAA;AAAD;AAEC;EACC,cAAA;AAAF;AAPA;EAWE,eAAA;EACA,SAAA;EACA,gBAAA;EACA,WAAA;EACA,mBAAA;AADF;AAdA;EAmBE,gBAAA;EACA,eAAA;EACA,WAAA;EACE,mBAAA;EACF,iBAAA;EACA,kBAAA;EACA,yBAAA;EACA,eAAA;EACA,kBAAA;AAFF;AAIE;EACC,kBAAA;AAFH;AAIG;EACC,WAAA;EACA,kBAAA;EACA,SAAA;EACA,QAAA;EACA,yBAAA;EACC,6BAAA;EACA,kBAAA;EACA,WAAA;EACA,YAAA;EACA,wCAAA;AAFL;AAxCA;EAgDE,eAAA;EACA,WAAA;EACA,cAAA;AALF;AA7CA;EAqDG,WAAA;EACA,iBAAA;AALH;AASA;EACC,SAAA;EACA,qDAAA;AAPD\",\"sourcesContent\":[\"@keyframes spin {\\n  0% { transform: rotate(0deg); }\\n  100% { transform: rotate(360deg); }\\n}\\n\\n.container {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\theight: 100vh;\\n}\\n\\n.right {\\n\\tborder-left: 1px solid #eee;\\n\\tpadding: 20px;\\n\\twhite-space: pre;\\n\\n\\th2 {\\n\\t\\tmargin: 0 0 0 5px;\\n\\t\\tfont-size: 16px;\\n\\t\\tcolor: #10f108;\\n\\t\\tpadding: 3px 7px;\\n\\t\\tfont-weight: normal;\\n\\t\\tbackground: #242425;\\n\\t\\tborder-radius: 2px;\\n\\t\\tdisplay: inline-block;\\n\\t}\\n}\\n\\n.co {\\n\\tdisplay: flex;\\n\\tpadding: 20px;\\n}\\n\\n.com {\\n\\tborder: 1px solid #eee;\\n\\tpadding: 20px;\\n\\tflex: 1;\\n\\tborder-radius: 2px;\\n\\n\\t&:nth-child(2) {\\n\\t\\tmargin: 0 20px;\\n\\t}\\n\\n\\th2 {\\n\\t\\tfont-size: 24px;\\n\\t\\tmargin: 0;\\n\\t\\tfont-weight: 400;\\n\\t\\tcolor: #333;\\n\\t\\tmargin-bottom: 30px;\\n\\t}\\n\\n\\tbutton {\\n\\t\\tmargin-top: 20px;\\n\\t\\tfont-size: 14px;\\n\\t\\tcolor: #fff;\\n    background: #0170fe;\\n\\t\\tpadding: 4px 10px;\\n\\t\\tborder-radius: 3px;\\n\\t\\tborder: 1px solid #0170fe;\\n\\t\\tcursor: pointer;\\n\\t\\tposition: relative;\\n\\n\\t\\t&.loading {\\n\\t\\t\\tpadding-left: 24px;\\n\\n\\t\\t\\t&::before {\\n\\t\\t\\t\\tcontent: '';\\n\\t\\t\\t\\tposition: absolute;\\n\\t\\t\\t\\tleft: 4px;\\n\\t\\t\\t\\ttop: 4px;\\n\\t\\t\\t\\tborder: 2px solid #f3f3f3;\\n  \\t\\t\\tborder-top: 2px solid #3498db;\\n  \\t\\t\\tborder-radius: 50%;\\n  \\t\\t\\twidth: 12px;\\n  \\t\\t\\theight: 12px;\\n  \\t\\t\\tanimation: spin 2s linear infinite;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\tp {\\n\\t\\tfont-size: 16px;\\n\\t\\tcolor: #555;\\n\\t\\tmargin: 10px 0;\\n\\n\\t\\tspan {\\n\\t\\t\\tcolor: #888;\\n\\t\\t\\tmargin-right: 5px;\\n\\t\\t}\\n\\t}\\n}\\nbody {\\n\\tmargin: 0;\\n\\tfont-family: Georgia, 'Times New Roman', Times, serif;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"container\": \"container_2cx6z\",\n\t\"right\": \"right_1T0vt\",\n\t\"co\": \"co_1hMsD\",\n\t\"com\": \"com_3UsWm\",\n\t\"loading\": \"loading_2tX-6\",\n\t\"spin\": \"spin_2jXe4\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) var result = runtime(__webpack_require__);\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunknycticorax\"] = self[\"webpackChunknycticorax\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [736], () => (__webpack_require__(269)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"sourceRoot":""}