(()=>{"use strict";var e,t={269:(e,t,n)=>{var r=n(294),o=n(935),i=n(63),a=n.n(i),s=n(465),c=n.n(s);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class u{constructor(){p(this,"state",void 0),p(this,"listeners",void 0),p(this,"emits",void 0),p(this,"timer",void 0),p(this,"onStateChange",void 0),p(this,"createStore",(e=>{this.listeners=Reflect.ownKeys(e).reduce(((e,t)=>A(A({},e),{},{[t]:[]})),{}),this.state=e})),p(this,"getStore",(()=>c()(this.state))),p(this,"subscribe",(e=>{var t={};return Reflect.ownKeys(e).forEach((n=>{var r=n;this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push(e[r]),t[r]=e[r]})),()=>{Reflect.ownKeys(t).forEach((e=>{var n=e;this.listeners[n]=this.listeners[n].filter((e=>e!==t[n]))}))}})),p(this,"emit",((e,t)=>{this.emits=A(A({},this.emits),e),t?this.trigger():(clearTimeout(this.timer),this.timer=setTimeout(this.trigger))})),p(this,"dispatch",((e,t)=>e({getStore:this.getStore,emit:e=>this.emit(e,!0)},t))),p(this,"trigger",(()=>{for(var e=this.emits,t=[],n=Reflect.ownKeys(e),r=0;r<n.length;r+=1){var o=n[r];if(!a()(this.state[o],e[o])){var i=e[o],s=this.state[o];this.state[o]=e[o],t.push({key:o,newValue:i,oldValue:s})}}var c={};t.forEach((e=>{c[e.key]=[e.newValue,e.oldValue],this.listeners[e.key]&&this.listeners[e.key].forEach((t=>t(e.newValue,e.oldValue)))})),t.length&&this.onStateChange(c),this.emits={},this.timer=void 0})),this.state={},this.listeners={},this.emits={},this.timer=void 0,this.onStateChange=()=>null}set onChange(e){this.onStateChange=e}}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=["name","prototype","length","propTypes","defaultProps","getDerivedStateFromProps","contextTypes","displayName"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=Symbol("key"),x=new class extends u{constructor(){super(...arguments),v(this,"connect",function(e){var{getStore:t,subscribe:n,dispatch:o,emit:i}=e;return function(){for(var e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return function(e){class s extends r.Component{constructor(e){super(e),d(this,"unsubscribe",void 0),d(this,"state",{props:t()}),this.unsubscribe=n(a.reduce(((e,n)=>f(f({},e),{},{[n]:()=>{this.setState({props:t()})}})),{}))}componentWillUnmount(){this.unsubscribe()}render(){var{props:t}=this.state,n=Object.assign({dispatch:o,emit:i},t,this.props);return r.createElement(e,n)}}return Object.getOwnPropertyNames(e).forEach((t=>{var n=t;g.includes(t)||(s[n]=e[n])})),s}}}(this)),v(this,"useStore",function(e){var{getStore:t,subscribe:n}=e;return function(){for(var e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];var[a,s]=(0,r.useState)(t());return(0,r.useLayoutEffect)((()=>n(o.reduce(((e,n)=>b(b({},e),{},{[n]:()=>{s(t())}})),{})))),a}}(this))}},{createStore:C,getStore:O,dispatch:w,subscribe:j,connect:P,useStore:S,emit:k}=x,B=n(379),D=n.n(B),_=n(933);D()(_.Z,{insert:"head",singleton:!1});const N=_.Z.locals||{};function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function z(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){T(i,r,o,a,s,"next",e)}function s(e){T(i,r,o,a,s,"throw",e)}a(void 0)}))}}function G(){var e=S("name","age",y);return r.createElement("div",{className:N.com},r.createElement("h2",null,"Hooks"),r.createElement("p",null,r.createElement("span",null,"name:"),e.name),r.createElement("p",null,r.createElement("span",null,"age:"),e.age),r.createElement("p",null,r.createElement("span",null,"symbol:"),e[y]),r.createElement("button",{type:"button",onClick:()=>{k({age:e.age+1,[y]:"".concat(Math.random()).slice(15)})}},"Dispatch"))}C({age:0,name:"abc",[y]:"a"}),j({age(e,t){console.log(e,t,"age")},[y]:(e,t)=>{console.log(e,t,"symbolKey")}});var U=function(){var e=z((function*(e,t){var{emit:n,getStore:r}=e;return yield new Promise((e=>setTimeout(e,2e3))),n({name:null==t?void 0:t.text}),r().name}));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=z((function*(e){var{emit:t,getStore:n}=e,{age:r}=n();t({age:r+1})}));return function(t){return e.apply(this,arguments)}}();class W extends r.Component{constructor(){var e;super(...arguments),e=this,F(this,"state",{loading:!1}),F(this,"setName",z((function*(){var{loading:t}=e.state;if(!t){e.setState({loading:!0});var{emit:n,dispatch:r}=e.props;n({age:1}),yield r(U,{text:Math.random().toString(36).substring(7)}),e.setState({loading:!1}),console.log(O())}})))}render(){var{age:e,name:t,desc:n}=this.props,{loading:o}=this.state,i=O(),a=o?N.loading:"";return r.createElement("div",{className:N.com},r.createElement("h2",null,n),r.createElement("p",null,r.createElement("span",null,"name:"),t),r.createElement("p",null,r.createElement("span",null,"age:"),e),r.createElement("p",null,r.createElement("span",null,"symbol:"),i[y]),r.createElement("button",{className:a,type:"button",onClick:this.setName},"Async Dispatch"))}}var R=P("age","name")(W),K=P("age","name",y)((function(e){var{age:t,name:n,dispatch:o,desc:i}=e,a=O();return r.createElement("div",{className:N.com},r.createElement("h2",null,i),r.createElement("p",null,r.createElement("span",null,"name:"),n),r.createElement("p",null,r.createElement("span",null,"age:"),t),r.createElement("p",null,r.createElement("span",null,"symbol:"),a[y]),r.createElement("button",{type:"button",onClick:()=>{o(I)}},"Dispatch"))}));function V(){return r.createElement(r.Fragment,null,r.createElement(G,null),r.createElement(R,{desc:"Class Component"}),r.createElement(K,{desc:"Function Component"}))}var Z=new u,{createStore:L,getStore:q,dispatch:M,subscribe:H,emit:X}=Z;const Q=Z;function Y(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function J(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Y(i,r,o,a,s,"next",e)}function s(e){Y(i,r,o,a,s,"throw",e)}a(void 0)}))}}const $=()=>((0,r.useEffect)((()=>{L({config:{type:"page",on:!1},time:11});var e=H({time(e,t){console.log(e,t,"subscribe")},test(e,t){console.log(e,t,"subscribe test")}});Q.onChange=e=>{console.log(e,"onChange")},console.log("store0",q()),X({time:1}),X({config:{on:!0,type:"component"}}),console.log("store1",q()),setTimeout((()=>console.log("store2",q()))),X({time:2,test:"1111"},!0),X({test:"2222"},!0),console.log("store3",q()),M(function(){var e=J((function*(e,t){var{getStore:n,emit:r}=e;console.log("params0",t);var{time:o}=n();r({time:o+1})}));return function(t,n){return e.apply(this,arguments)}}(),{a:1});var t=function(){var e=J((function*(e,t){var{getStore:n,emit:r}=e;console.log("params1",t),yield new Promise((e=>setTimeout(e,1e3)));var{config:o}=n();"boolean"==typeof(null==t?void 0:t.type)&&(o.on=t.type),r({config:o})}));return function(t,n){return e.apply(this,arguments)}}(),n=function(){var e=J((function*(e){var{getStore:t}=e,{config:n}=t();return console.log(n),1}));return function(t){return e.apply(this,arguments)}}();M(t,{type:!1}),M(n).then((()=>{console.log("2"),X({time:1e3})})),e()}),[]),null);(0,o.render)(r.createElement("div",{className:N.container},r.createElement("div",{className:N.co},r.createElement(V,null)),r.createElement("div",{className:N.ru},r.createElement($,null))),document.querySelector("#root"))},933:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(15),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([e.id,"@keyframes spin_XmCvh {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n.container_GSuNg {\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n}\n.right_tGsPZ {\n  border-left: 1px solid #eee;\n  padding: 20px;\n  white-space: pre;\n}\n.right_tGsPZ h2 {\n  margin: 0 0 0 5px;\n  font-size: 16px;\n  color: #10f108;\n  padding: 3px 7px;\n  font-weight: normal;\n  background: #242425;\n  border-radius: 2px;\n  display: inline-block;\n}\n.co_Onwr7 {\n  display: flex;\n  padding: 20px;\n}\n.com_55xUi {\n  border: 1px solid #eee;\n  padding: 20px;\n  flex: 1;\n  border-radius: 2px;\n}\n.com_55xUi:nth-child(2) {\n  margin: 0 20px;\n}\n.com_55xUi h2 {\n  font-size: 24px;\n  margin: 0;\n  font-weight: 400;\n  color: #333;\n  margin-bottom: 30px;\n}\n.com_55xUi button {\n  margin-top: 20px;\n  font-size: 14px;\n  color: #fff;\n  background: #0170fe;\n  padding: 4px 10px;\n  border-radius: 3px;\n  border: 1px solid #0170fe;\n  cursor: pointer;\n  position: relative;\n}\n.com_55xUi button.loading_nIjEz {\n  padding-left: 24px;\n}\n.com_55xUi button.loading_nIjEz::before {\n  content: '';\n  position: absolute;\n  left: 4px;\n  top: 4px;\n  border: 2px solid #f3f3f3;\n  border-top: 2px solid #3498db;\n  border-radius: 50%;\n  width: 12px;\n  height: 12px;\n  animation: spin_XmCvh 2s linear infinite;\n}\n.com_55xUi p {\n  font-size: 16px;\n  color: #555;\n  margin: 10px 0;\n}\n.com_55xUi p span {\n  color: #888;\n  margin-right: 5px;\n}\nbody {\n  margin: 0;\n  font-family: Georgia, 'Times New Roman', Times, serif;\n}\n","",{version:3,sources:["webpack://./demo/index.less"],names:[],mappings:"AAAA;EACE;IAAK,uBAAA;EAEL;EADA;IAAO,yBAAA;EAIP;AACF;AAFA;EACC,aAAA;EACA,sBAAA;EACA,aAAA;AAID;AADA;EACC,2BAAA;EACA,aAAA;EACA,gBAAA;AAGD;AANA;EAME,iBAAA;EACA,eAAA;EACA,cAAA;EACA,gBAAA;EACA,mBAAA;EACA,mBAAA;EACA,kBAAA;EACA,qBAAA;AAGF;AACA;EACC,aAAA;EACA,aAAA;AACD;AAEA;EACC,sBAAA;EACA,aAAA;EACA,OAAA;EACA,kBAAA;AAAD;AAEC;EACC,cAAA;AAAF;AAPA;EAWE,eAAA;EACA,SAAA;EACA,gBAAA;EACA,WAAA;EACA,mBAAA;AADF;AAdA;EAmBE,gBAAA;EACA,eAAA;EACA,WAAA;EACE,mBAAA;EACF,iBAAA;EACA,kBAAA;EACA,yBAAA;EACA,eAAA;EACA,kBAAA;AAFF;AAIE;EACC,kBAAA;AAFH;AAIG;EACC,WAAA;EACA,kBAAA;EACA,SAAA;EACA,QAAA;EACA,yBAAA;EACC,6BAAA;EACA,kBAAA;EACA,WAAA;EACA,YAAA;EACA,wCAAA;AAFL;AAxCA;EAgDE,eAAA;EACA,WAAA;EACA,cAAA;AALF;AA7CA;EAqDG,WAAA;EACA,iBAAA;AALH;AASA;EACC,SAAA;EACA,qDAAA;AAPD",sourcesContent:["@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.container {\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: 100vh;\n}\n\n.right {\n\tborder-left: 1px solid #eee;\n\tpadding: 20px;\n\twhite-space: pre;\n\n\th2 {\n\t\tmargin: 0 0 0 5px;\n\t\tfont-size: 16px;\n\t\tcolor: #10f108;\n\t\tpadding: 3px 7px;\n\t\tfont-weight: normal;\n\t\tbackground: #242425;\n\t\tborder-radius: 2px;\n\t\tdisplay: inline-block;\n\t}\n}\n\n.co {\n\tdisplay: flex;\n\tpadding: 20px;\n}\n\n.com {\n\tborder: 1px solid #eee;\n\tpadding: 20px;\n\tflex: 1;\n\tborder-radius: 2px;\n\n\t&:nth-child(2) {\n\t\tmargin: 0 20px;\n\t}\n\n\th2 {\n\t\tfont-size: 24px;\n\t\tmargin: 0;\n\t\tfont-weight: 400;\n\t\tcolor: #333;\n\t\tmargin-bottom: 30px;\n\t}\n\n\tbutton {\n\t\tmargin-top: 20px;\n\t\tfont-size: 14px;\n\t\tcolor: #fff;\n    background: #0170fe;\n\t\tpadding: 4px 10px;\n\t\tborder-radius: 3px;\n\t\tborder: 1px solid #0170fe;\n\t\tcursor: pointer;\n\t\tposition: relative;\n\n\t\t&.loading {\n\t\t\tpadding-left: 24px;\n\n\t\t\t&::before {\n\t\t\t\tcontent: '';\n\t\t\t\tposition: absolute;\n\t\t\t\tleft: 4px;\n\t\t\t\ttop: 4px;\n\t\t\t\tborder: 2px solid #f3f3f3;\n  \t\t\tborder-top: 2px solid #3498db;\n  \t\t\tborder-radius: 50%;\n  \t\t\twidth: 12px;\n  \t\t\theight: 12px;\n  \t\t\tanimation: spin 2s linear infinite;\n\t\t\t}\n\t\t}\n\t}\n\n\tp {\n\t\tfont-size: 16px;\n\t\tcolor: #555;\n\t\tmargin: 10px 0;\n\n\t\tspan {\n\t\t\tcolor: #888;\n\t\t\tmargin-right: 5px;\n\t\t}\n\t}\n}\nbody {\n\tmargin: 0;\n\tfont-family: Georgia, 'Times New Roman', Times, serif;\n}\n"],sourceRoot:""}]),a.locals={container:"container_GSuNg",right:"right_tGsPZ",co:"co_Onwr7",com:"com_55xUi",loading:"loading_nIjEz",spin:"spin_XmCvh"};const s=a}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={id:e,loaded:!1,exports:{}};return t[e](i,i.exports,r),i.loaded=!0,i.exports}r.m=t,e=[],r.O=(t,n,o,i)=>{if(!n){var a=1/0;for(A=0;A<e.length;A++){for(var[n,o,i]=e[A],s=!0,c=0;c<n.length;c++)(!1&i||a>=i)&&Object.keys(r.O).every((e=>r.O[e](n[c])))?n.splice(c--,1):(s=!1,i<a&&(a=i));if(s){e.splice(A--,1);var l=o();void 0!==l&&(t=l)}}return t}i=i||0;for(var A=e.length;A>0&&e[A-1][2]>i;A--)e[A]=e[A-1];e[A]=[n,o,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={179:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,[a,s,c]=n,l=0;if(a.some((t=>0!==e[t]))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(c)var A=c(r)}for(t&&t(n);l<a.length;l++)i=a[l],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(A)},n=self.webpackChunknycticorax=self.webpackChunknycticorax||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),r.nc=void 0;var o=r.O(void 0,[736],(()=>r(269)));o=r.O(o)})();
//# sourceMappingURL=main.15e68c45.js.map