(()=>{"use strict";var e,t={269:(e,t,n)=>{var r=n(294),o=n(935),i=n(63),a=n.n(i);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l{constructor(){A(this,"state",void 0),A(this,"listeners",void 0),A(this,"emits",void 0),A(this,"timer",void 0),A(this,"createStore",(e=>{this.listeners=Reflect.ownKeys(e).reduce(((e,t)=>c(c({},e),{},{[t]:[]})),{}),this.state=e})),A(this,"getStore",(()=>c({},this.state))),A(this,"subscribe",(e=>{var t={},n=Reflect.ownKeys(this.state);return Reflect.ownKeys(e).forEach((r=>{var o=r;n.includes(r)&&(this.listeners[o].push(e[o]),t[o]=e[o])})),()=>{Reflect.ownKeys(t).forEach((e=>{var n=e;this.listeners[n]=this.listeners[n].filter((e=>e!==t[n]))}))}})),A(this,"emit",((e,t)=>{this.emits=c(c({},this.emits),e),t?this.trigger():(clearTimeout(this.timer),this.timer=setTimeout(this.trigger))})),A(this,"dispatch",((e,t)=>e({getStore:this.getStore,emit:e=>this.emit(e,!0)},t))),A(this,"trigger",(()=>{for(var e=this.emits,t=[],n=Reflect.ownKeys(e),r=0;r<n.length;r+=1){var o=n[r];if(!a()(this.state[o],e[o])){var i=e[o],s=this.state[o];this.state[o]=e[o],t.push({key:o,newValue:i,oldValue:s})}}t.forEach((e=>{this.listeners[e.key]&&this.listeners[e.key].forEach((t=>t(e.newValue,e.oldValue)))})),this.emits={},this.timer=void 0})),this.state={},this.listeners={},this.emits={},this.timer=void 0}}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=["name","prototype","length","propTypes","defaultProps","getDerivedStateFromProps","contextTypes","displayName"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=Symbol("key"),v=new class extends l{constructor(){super(...arguments),b(this,"connect",function(e){var{getStore:t,subscribe:n,dispatch:o,emit:i}=e;return function(){for(var e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return function(e){class s extends r.Component{constructor(e){super(e),m(this,"unsubscribe",void 0),m(this,"state",{props:t()}),this.unsubscribe=n(a.reduce(((e,n)=>u(u({},e),{},{[n]:()=>{this.setState({props:t()})}})),{}))}componentWillUnmount(){this.unsubscribe()}render(){var{props:t}=this.state,n=Object.assign({dispatch:o,emit:i},t,this.props);return r.createElement(e,n)}}return Object.getOwnPropertyNames(e).forEach((t=>{var n=t;f.includes(t)||(s[n]=e[n])})),s}}}(this)),b(this,"useStore",function(e){var{getStore:t,subscribe:n}=e;return function(){for(var e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];var[a,s]=(0,r.useState)(t());return(0,r.useLayoutEffect)((()=>n(o.reduce(((e,n)=>g(g({},e),{},{[n]:()=>{s(t())}})),{})))),a}}(this))}},{createStore:y,getStore:x,dispatch:C,subscribe:O,connect:w,useStore:j,emit:P}=v,S=n(379),k=n.n(S),B=n(933);k()(B.Z,{insert:"head",singleton:!1});const D=B.Z.locals||{};function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function F(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){N(i,r,o,a,s,"next",e)}function s(e){N(i,r,o,a,s,"throw",e)}a(void 0)}))}}function z(){var e=j("name","age",E);return r.createElement("div",{className:D.com},r.createElement("h2",null,"Hooks"),r.createElement("p",null,r.createElement("span",null,"name:"),e.name),r.createElement("p",null,r.createElement("span",null,"age:"),e.age),r.createElement("p",null,r.createElement("span",null,"symbol:"),e[E]),r.createElement("button",{type:"button",onClick:()=>{P({age:e.age+1,[E]:"".concat(Math.random()).slice(15)})}},"Dispatch"))}y({age:0,name:"abc",[E]:"a"}),O({age(e,t){console.log(e,t,"age")},[E]:(e,t)=>{console.log(e,t,"symbolKey")}});var G=function(){var e=F((function*(e,t){var{emit:n,getStore:r}=e;return yield new Promise((e=>setTimeout(e,2e3))),n({name:null==t?void 0:t.text}),r().name}));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=F((function*(e){var{emit:t,getStore:n}=e,{age:r}=n();t({age:r+1})}));return function(t){return e.apply(this,arguments)}}();class U extends r.Component{constructor(){var e;super(...arguments),e=this,_(this,"state",{loading:!1}),_(this,"setName",F((function*(){var{loading:t}=e.state;if(!t){e.setState({loading:!0});var{emit:n,dispatch:r}=e.props;n({age:1}),yield r(G,{text:Math.random().toString(36).substring(7)}),e.setState({loading:!1}),console.log(x())}})))}render(){var{age:e,name:t,desc:n}=this.props,{loading:o}=this.state,i=x(),a=o?D.loading:"";return r.createElement("div",{className:D.com},r.createElement("h2",null,n),r.createElement("p",null,r.createElement("span",null,"name:"),t),r.createElement("p",null,r.createElement("span",null,"age:"),e),r.createElement("p",null,r.createElement("span",null,"symbol:"),i[E]),r.createElement("button",{className:a,type:"button",onClick:this.setName},"Async Dispatch"))}}var I=w("age","name")(U),R=w("age","name",E)((function(e){var{age:t,name:n,dispatch:o,desc:i}=e,a=x();return r.createElement("div",{className:D.com},r.createElement("h2",null,i),r.createElement("p",null,r.createElement("span",null,"name:"),n),r.createElement("p",null,r.createElement("span",null,"age:"),t),r.createElement("p",null,r.createElement("span",null,"symbol:"),a[E]),r.createElement("button",{type:"button",onClick:()=>{o(T)}},"Dispatch"))}));function W(){return r.createElement(r.Fragment,null,r.createElement(z,null),r.createElement(I,{desc:"Class Component"}),r.createElement(R,{desc:"Function Component"}))}var K=new l,{createStore:Z,getStore:L,dispatch:q,subscribe:M,emit:V}=K;function H(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function X(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){H(i,r,o,a,s,"next",e)}function s(e){H(i,r,o,a,s,"throw",e)}a(void 0)}))}}const Q=()=>((0,r.useEffect)((()=>{Z({config:{type:"page",on:!1},time:11,test:void 0});var e=M({time(e,t){console.log(e,t,"subscribe")}});console.log("store0",L()),V({time:1}),V({config:{on:!0,type:"component"}}),console.log("store1",L()),setTimeout((()=>console.log("store2",L()))),V({time:2,test:"1111"},!0),console.log("store3",L()),q(function(){var e=X((function*(e,t){var{getStore:n,emit:r}=e;console.log("params0",t);var{time:o}=n();r({time:o+1})}));return function(t,n){return e.apply(this,arguments)}}(),{a:1});var t=function(){var e=X((function*(e,t){var{getStore:n,emit:r}=e;console.log("params1",t),yield new Promise((e=>setTimeout(e,1e3)));var{config:o}=n();"boolean"==typeof(null==t?void 0:t.type)&&(o.on=t.type),r({config:o})}));return function(t,n){return e.apply(this,arguments)}}(),n=function(){var e=X((function*(e){var{getStore:t}=e,{config:n}=t();return console.log(n),1}));return function(t){return e.apply(this,arguments)}}();q(t,{type:!1}),q(n).then((()=>{console.log("2"),V({time:1e3})})),e()}),[]),null);(0,o.render)(r.createElement("div",{className:D.container},r.createElement("div",{className:D.co},r.createElement(W,null)),r.createElement("div",{className:D.ru},r.createElement(Q,null))),document.querySelector("#root"))},933:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(15),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([e.id,"@keyframes spin_XmCvh {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n.container_GSuNg {\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n}\n.right_tGsPZ {\n  border-left: 1px solid #eee;\n  padding: 20px;\n  white-space: pre;\n}\n.right_tGsPZ h2 {\n  margin: 0 0 0 5px;\n  font-size: 16px;\n  color: #10f108;\n  padding: 3px 7px;\n  font-weight: normal;\n  background: #242425;\n  border-radius: 2px;\n  display: inline-block;\n}\n.co_Onwr7 {\n  display: flex;\n  padding: 20px;\n}\n.com_55xUi {\n  border: 1px solid #eee;\n  padding: 20px;\n  flex: 1;\n  border-radius: 2px;\n}\n.com_55xUi:nth-child(2) {\n  margin: 0 20px;\n}\n.com_55xUi h2 {\n  font-size: 24px;\n  margin: 0;\n  font-weight: 400;\n  color: #333;\n  margin-bottom: 30px;\n}\n.com_55xUi button {\n  margin-top: 20px;\n  font-size: 14px;\n  color: #fff;\n  background: #0170fe;\n  padding: 4px 10px;\n  border-radius: 3px;\n  border: 1px solid #0170fe;\n  cursor: pointer;\n  position: relative;\n}\n.com_55xUi button.loading_nIjEz {\n  padding-left: 24px;\n}\n.com_55xUi button.loading_nIjEz::before {\n  content: '';\n  position: absolute;\n  left: 4px;\n  top: 4px;\n  border: 2px solid #f3f3f3;\n  border-top: 2px solid #3498db;\n  border-radius: 50%;\n  width: 12px;\n  height: 12px;\n  animation: spin_XmCvh 2s linear infinite;\n}\n.com_55xUi p {\n  font-size: 16px;\n  color: #555;\n  margin: 10px 0;\n}\n.com_55xUi p span {\n  color: #888;\n  margin-right: 5px;\n}\nbody {\n  margin: 0;\n  font-family: Georgia, 'Times New Roman', Times, serif;\n}\n","",{version:3,sources:["webpack://./demo/index.less"],names:[],mappings:"AAAA;EACE;IAAK,uBAAA;EAEL;EADA;IAAO,yBAAA;EAIP;AACF;AAFA;EACC,aAAA;EACA,sBAAA;EACA,aAAA;AAID;AADA;EACC,2BAAA;EACA,aAAA;EACA,gBAAA;AAGD;AANA;EAME,iBAAA;EACA,eAAA;EACA,cAAA;EACA,gBAAA;EACA,mBAAA;EACA,mBAAA;EACA,kBAAA;EACA,qBAAA;AAGF;AACA;EACC,aAAA;EACA,aAAA;AACD;AAEA;EACC,sBAAA;EACA,aAAA;EACA,OAAA;EACA,kBAAA;AAAD;AAEC;EACC,cAAA;AAAF;AAPA;EAWE,eAAA;EACA,SAAA;EACA,gBAAA;EACA,WAAA;EACA,mBAAA;AADF;AAdA;EAmBE,gBAAA;EACA,eAAA;EACA,WAAA;EACE,mBAAA;EACF,iBAAA;EACA,kBAAA;EACA,yBAAA;EACA,eAAA;EACA,kBAAA;AAFF;AAIE;EACC,kBAAA;AAFH;AAIG;EACC,WAAA;EACA,kBAAA;EACA,SAAA;EACA,QAAA;EACA,yBAAA;EACC,6BAAA;EACA,kBAAA;EACA,WAAA;EACA,YAAA;EACA,wCAAA;AAFL;AAxCA;EAgDE,eAAA;EACA,WAAA;EACA,cAAA;AALF;AA7CA;EAqDG,WAAA;EACA,iBAAA;AALH;AASA;EACC,SAAA;EACA,qDAAA;AAPD",sourcesContent:["@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.container {\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: 100vh;\n}\n\n.right {\n\tborder-left: 1px solid #eee;\n\tpadding: 20px;\n\twhite-space: pre;\n\n\th2 {\n\t\tmargin: 0 0 0 5px;\n\t\tfont-size: 16px;\n\t\tcolor: #10f108;\n\t\tpadding: 3px 7px;\n\t\tfont-weight: normal;\n\t\tbackground: #242425;\n\t\tborder-radius: 2px;\n\t\tdisplay: inline-block;\n\t}\n}\n\n.co {\n\tdisplay: flex;\n\tpadding: 20px;\n}\n\n.com {\n\tborder: 1px solid #eee;\n\tpadding: 20px;\n\tflex: 1;\n\tborder-radius: 2px;\n\n\t&:nth-child(2) {\n\t\tmargin: 0 20px;\n\t}\n\n\th2 {\n\t\tfont-size: 24px;\n\t\tmargin: 0;\n\t\tfont-weight: 400;\n\t\tcolor: #333;\n\t\tmargin-bottom: 30px;\n\t}\n\n\tbutton {\n\t\tmargin-top: 20px;\n\t\tfont-size: 14px;\n\t\tcolor: #fff;\n    background: #0170fe;\n\t\tpadding: 4px 10px;\n\t\tborder-radius: 3px;\n\t\tborder: 1px solid #0170fe;\n\t\tcursor: pointer;\n\t\tposition: relative;\n\n\t\t&.loading {\n\t\t\tpadding-left: 24px;\n\n\t\t\t&::before {\n\t\t\t\tcontent: '';\n\t\t\t\tposition: absolute;\n\t\t\t\tleft: 4px;\n\t\t\t\ttop: 4px;\n\t\t\t\tborder: 2px solid #f3f3f3;\n  \t\t\tborder-top: 2px solid #3498db;\n  \t\t\tborder-radius: 50%;\n  \t\t\twidth: 12px;\n  \t\t\theight: 12px;\n  \t\t\tanimation: spin 2s linear infinite;\n\t\t\t}\n\t\t}\n\t}\n\n\tp {\n\t\tfont-size: 16px;\n\t\tcolor: #555;\n\t\tmargin: 10px 0;\n\n\t\tspan {\n\t\t\tcolor: #888;\n\t\t\tmargin-right: 5px;\n\t\t}\n\t}\n}\nbody {\n\tmargin: 0;\n\tfont-family: Georgia, 'Times New Roman', Times, serif;\n}\n"],sourceRoot:""}]),a.locals={container:"container_GSuNg",right:"right_tGsPZ",co:"co_Onwr7",com:"com_55xUi",loading:"loading_nIjEz",spin:"spin_XmCvh"};const s=a}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={id:e,exports:{}};return t[e](i,i.exports,r),i.exports}r.m=t,e=[],r.O=(t,n,o,i)=>{if(!n){var a=1/0;for(l=0;l<e.length;l++){for(var[n,o,i]=e[l],s=!0,c=0;c<n.length;c++)(!1&i||a>=i)&&Object.keys(r.O).every((e=>r.O[e](n[c])))?n.splice(c--,1):(s=!1,i<a&&(a=i));if(s){e.splice(l--,1);var A=o();void 0!==A&&(t=A)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[n,o,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,[a,s,c]=n,A=0;if(a.some((t=>0!==e[t]))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(c)var l=c(r)}for(t&&t(n);A<a.length;A++)i=a[A],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(l)},n=self.webpackChunknycticorax=self.webpackChunknycticorax||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),r.nc=void 0;var o=r.O(void 0,[736],(()=>r(269)));o=r.O(o)})();
//# sourceMappingURL=main.f0e47f3d.js.map